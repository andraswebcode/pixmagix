var pixmagixEditor;(()=>{"use strict";var e={745:(e,t,r)=>{var n=r(533);t.s=n.createRoot,n.hydrateRoot},533:e=>{e.exports=ReactDOM}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{Templates:()=>M,initialize:()=>T});var e=r(745);const t=React;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===o(a)?a:String(a)),n)}var a}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(s,e);var t,r,n,c,u,f=(c=s,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(c);if(u){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=f.apply(this,arguments)).state={hasError:!1},e}return t=s,n=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],(r=[{key:"componentDidCatch",value:function(){}},{key:"render",value:function(){return this.state.hasError?React.createElement("div",{className:"pixmagix-error-boundary"}):this.props.children}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(t.Component),u=wp.i18n,f=function(){return React.createElement("div",{className:"pixmagix-header"},React.createElement("div",{className:"pixmagix-header__title"},React.createElement("h1",null,(0,u.__)("PixMagix - Templates","pixmagix"))))},s=pixmagixElements,p=pixmagixGlobals,m=wp.apiFetch;var y=r.n(m);const v=lodash;var b="pixmagix/v1/";function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.indexOf("data:"))return t;var r=-1===(null==t?void 0:t.indexOf("?"))?"?":"&";return t+r+(0,v.reduce)(e,(function(e,t,r){return e.push(r+"="+t),e}),[]).join("&")}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const x=function(e){var r=e.id,n=e.title,o=e.preview,a=e.hasPrev,i=e.hasNext,l=e.onNavigate,c=e.onClose,f=d((0,t.useState)(""),2),m=f[0],v=f[1],h=d((0,t.useState)(!1),2),x=h[0],O=h[1],E=function(e){O(!0),y()({path:b+"templates/",method:"POST",data:{id:r,projectName:m}}).then((function(t){console.log(t),e?window.location.replace(g({id:t.id},p.new_url)):O(!1)})).catch((function(e){console.error(e)}))};return React.createElement(s.Modal,{title:n,actions:React.createElement(s.ButtonGroup,null,React.createElement(s.Button,{active:!0,onClick:function(){return E(!0)}},(0,u.__)("Save And Edit","pixmagix")),React.createElement(s.Button,{onClick:function(){return E()}},(0,u.__)("Just Save","pixmagix"))),navigation:{prev:{disabled:!a,onClick:function(){return l("prev")}},next:{disabled:!i,onClick:function(){return l("next")}}},onClose:c},React.createElement(s.Row,null,React.createElement(s.Column,null,React.createElement("figure",null,React.createElement("img",{src:o}))),React.createElement(s.Column,null,React.createElement(s.Widget,null,React.createElement(s.Input,{label:(0,u.__)("Project Name","pixmagix"),placeholder:n,value:m,onChange:v})))),React.createElement(s.Loader,{show:x}))};var O=[{label:(0,u.__)("All Categories","pixmagix"),value:""},{label:(0,u.__)("Featured Images","pixmagix"),value:"featuredimages"},{label:(0,u.__)("Quotes","pixmagix"),value:"quotes"},{label:(0,u.__)("Motivational","pixmagix"),value:"motivational"},{label:(0,u.__)("Holydays","pixmagix"),value:"holydays"}],E=[{label:(0,u.__)("Any Aspect Ratio","pixmagix"),value:""},{label:(0,u.__)("2:1 - Landscape","pixmagix"),value:"2:1"},{label:(0,u.__)("3:2 - Landscape","pixmagix"),value:"3:2"}];function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}var S=["items","maxPages"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===j(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const I=function(e){var r=e.items,n=e.maxPages,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,S),a=(0,t.useRef)(!1),i=C((0,t.useState)(o),2),l=i[0],c=i[1],f=C((0,t.useState)(n||1),2),m=f[0],d=f[1],h=C((0,t.useState)(r||[]),2),j=h[0],R=h[1],A=C((0,t.useState)(null),2),I=A[0],k=A[1],M=C((0,t.useState)(!1),2),T=M[0],N=M[1],D=(0,t.useMemo)((function(){return(0,v.findIndex)(j,I)}),[j,I]),B=function(e,t){N(!0);var r=t?w(w({},l),{},P({},e,t)):(0,v.omit)(l,e);"page"!==e&&(r.page=1),c(r)};return(0,t.useEffect)((function(){a.current?y()({path:g(l,b+"templates/")}).then((function(e){var t,r,n,o,a;console.log(e),R(e.items),d(e.maxPages),N(!1),t=l,r=p.self_url,a=(0,v.omitBy)(t,(function(e,t){return!e||"page"===t})),t.page&&(a.p=t.page),null===(n=window.history)||void 0===n||null===(o=n.pushState)||void 0===o||o.call(n,{},"",g(a,r))})).catch((function(e){console.error(e)})):a.current=!0}),[l]),React.createElement("div",{className:"pixmagix-content"},React.createElement(s.InlineControls,null,React.createElement(s.Input,{label:(0,u.__)("Search","pixmagix"),value:l.search,onChange:function(e){return B("search",e)}}),React.createElement(s.Select,{label:(0,u.__)("Category","pixmagix"),value:l.category,options:O,onChange:function(e){return B("category",e)}}),React.createElement(s.Select,{label:(0,u.__)("Aspect Ratio","pixmagix"),value:l.aspect,options:E,onChange:function(e){return B("aspect",e)}})),React.createElement(s.Pagination,{page:l.page,maxPages:m,onChange:function(e){return B("page",e)}}),React.createElement(s.Grid,null,null!=j&&j.length?j.map((function(e){return React.createElement(s.GridItem,{key:e.id,caption:e.title,src:e.thumbnail,onClick:function(t){t.preventDefault(),k(e)}})})):React.createElement(s.GridItem,{isEmpty:!0,caption:(0,u.__)("No Items Found","pixmagix")})),React.createElement(s.Pagination,{page:l.page,maxPages:m,onChange:function(e){return B("page",e)}}),!!I&&React.createElement(x,_({},I,{hasPrev:D>0,hasNext:D<j.length-1,onNavigate:function(e){var t=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||0;return Math.min(Math.max(r,e),t)}("prev"===e?D-1:D+1,0,j.length-1);k(j[t])},onClose:function(){return k(null)}})),React.createElement(s.Loader,{show:T}))},k=function(e){return React.createElement(c,null,React.createElement(f,null),React.createElement(I,e))};var M=function(e){return React.createElement(k,e)},T=function(t){var r=document.getElementById("pixmagix");(0,e.s)(r).render(React.createElement(M,t))}})(),pixmagixEditor=n})();